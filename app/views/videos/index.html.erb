<%
#url = request.original_fullpath
#uri = URI.parse(url);
#params = []

#if uri.query != nil
 #params = CGI.parse(uri.query);
#end

%>

<span id="page-content-start"></span>

<section class="normal-section">
  <div class="container">
    <div class="col-md-12">
      <ol class="breadcrumb">
        <li><%= link_to 'Home', root_path %></li>
        <li class="active">Videos</li>
      </ol>
    </div>
    <h2>Videos</h2>
    <div class="btn-group">
    <input id="search-str" type="text" class="text-box-outline"></input>
      <a id="search-btn" class="btn-outline-white" href="#"><span class="glyphicon glyphicon-search"></span></a>
    </div>
    <div class="selectDiv">
      <%= content_tag :select, :id => "category", :name => "category" do %>
      <% [['Any', -1], ['Shows',1],['Shorts', 2],['Promos',3],['Stories',4]].each do |c| -%>
      <% if params[:category] != nil && params[:category] == c.last.to_s %>
      <%= content_tag :option, c.first, value: c.last, selected: true %>
      <% else %>
      <%= content_tag :option, c.first, value: c.last %>
      <% end %>
      <% end %>
      <% end %>
    </div> 
    <div class="selectDiv">
      <select id="show-num" name="show-num">
        <option value="-1">Any Show</option>
        <% @shows.each do |show| %>
        <option value="<%= show %>">Show <%= show %></option>
        <% end %>
      </select>
    </div>
    <div class="selectDiv">
      <select id="year" name="year">
        <option value="-1">Any Year</option>
        <% cur_year = @min_year.month < 8 ? @min_year.year - 1 : @min_year.year
        stop_year = @max_year.month < 8 ? @max_year.year - 1 : @max_year.year
        while(cur_year <= stop_year) %>
        <option value="<%= cur_year %>"><%= cur_year %>-<%= cur_year + 1 %></option>
        <% cur_year+=1
        end %>
      </select>
    </div>
    <div class="selectDiv">
      <select id="sort-method" name="sort-method">
        <option value = "14">Relevance</option>
        <option value = "15">Date Created</option>
        <option value = "16">Views</option>
      </select>
    </div>
  </div>
</section>

<section class="normal-section">
  <div class="container-fluid">
    <div id='search-videos' class="row">
      <%= render @videos %>
    </div>
  </div>
</section>

<%= javascript_include_tag "videos" %>
